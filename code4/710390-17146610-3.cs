    [DataContract]
    [KnownType(typeof(Message))]
    public abstract class AbstractMessage
    {
        ...
    }
