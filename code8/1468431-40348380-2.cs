        using System.Collections.Generic;
        using System.Linq;
        
        namespace CustomEF.EFStuff
        {
        
        
            public partial class YourAutoGeneratedContext
            {
                public List<Departments> GetDepartmentHierarchy(int departmentId)
                {
                    Departments mydep = this.Departments.FirstOrDefault(d => d.ID == departmentId);
                    if (mydep == null)
                    {
                        throw new System.Data.Entity.Core.ObjectNotFoundException("There is no department with ID = " + departmentId.ToString());
                    }
                    return mydep.Hierarchy;
                }
            }
        }
