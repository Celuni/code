        using System;
        using System.Collections.Generic;
        using System.Linq;
        
        namespace CustomEF.EFStuff
        {
        
        
            public partial class Departments
            {
                public  List<Departments> Hierarchy {
                    get {
                        List<Departments> retVal = new List<Departments>();
                        retVal.Add(this);
                        using (YourAutoGeneratedContext ctx = new YourAutoGeneratedContext())
                        {
                            Departments tmp = this;
                            while(tmp.DepartmentID != null)
                            {
                                tmp = ctx.Departments.First(d => d.ID == tmp.DepartmentID);
                                retVal.Add(tmp);
                            }
                        }
                        return retVal;
                        
                    }
                    private set { }
                }
            }
        }
    
