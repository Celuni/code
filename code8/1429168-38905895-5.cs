    IPersistible persistible = user as IPersistible;
    Contract.Assert(persistible != null);
    
    if(persistible.IsNew)
    {
        // Create
    }
    else
    {
       // Update
    }
