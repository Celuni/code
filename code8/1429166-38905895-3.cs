    IObjectState some = user as IObjectState;
    Contract.Assert(some != null);
    
    if(some.IsNew)
    {
        // Create
    }
    else
    {
       // Update
    }
